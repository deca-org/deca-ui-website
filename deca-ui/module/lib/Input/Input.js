import { ThemeContext } from '../Theme';
import { uuid, __DEV__, } from '../Utils';
import clsx from 'clsx';
import React, { useMemo, useState } from 'react';
import { StyledInputMainContainer, StyledInputLabel, StyledInputHelperText, StyledInputContainer, StyledInput, } from './Input.styles';
const Input = React.forwardRef(({ label, className = '', disabled = false, size = 'md', variant = 'solid', as, css, focusColor = 'primary', maxWidth = false, placeholder, required = false, helperText = '', value, initialValue = '', onChange, onFocus, onBlur, pill = false, ...props }, ref) => {
    const [selfValue, setSelfValue] = useState(initialValue);
    const [focused, setFocused] = useState(false);
    const isControlledComponent = useMemo(() => value !== undefined, [value]);
    const changeHandler = (e) => {
        if (disabled)
            return;
        if (!isControlledComponent) {
            setSelfValue(e.target.value);
        }
        onChange && onChange(e);
    };
    const focusHandler = (e) => {
        if (disabled)
            return;
        setFocused(true);
        onFocus && onFocus(e);
    };
    const blurHandler = (e) => {
        if (disabled)
            return;
        setFocused(false);
        onBlur && onBlur(e);
    };
    const getState = useMemo(() => {
        return focused
            ? 'focused'
            : disabled
                ? 'isDisabled'
                : selfValue || value
                    ? 'value'
                    : 'default';
    }, [focused, disabled, selfValue, value]);
    const inputId = uuid('input');
    const preClass = 'decaInput';
    const { dark } = React.useContext(ThemeContext);
    return (React.createElement(StyledInputMainContainer, { className: clsx(className, `${preClass}-root`), css: css, size: size, maxWidth: maxWidth },
        label && (React.createElement(StyledInputLabel, { size: size, state: getState, className: `${preClass}-label`, variant: variant, focusColor: focusColor, htmlFor: inputId, pill: pill, isDark: dark }, label)),
        React.createElement(StyledInputContainer, { size: size, state: getState, className: `${preClass}-wrap`, variant: variant, focusColor: focusColor, maxWidth: maxWidth, pill: pill, isDark: dark },
            React.createElement(StyledInput, { onFocus: focusHandler, onBlur: blurHandler, onChange: changeHandler, className: `${preClass}-input`, ref: ref, variant: variant, state: getState, as: as, size: size, value: isControlledComponent ? value : selfValue, required: required, disabled: disabled, placeholder: placeholder, id: inputId, pill: pill, isDark: dark, ...props })),
        helperText && (React.createElement(StyledInputHelperText, { size: size, state: getState, className: `${preClass}-helperText`, pill: pill, isDark: dark }, helperText))));
});
if (__DEV__) {
    Input.displayName = 'DecaUI.Input';
}
export default Input;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5wdXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL0lucHV0L0lucHV0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBRTFDLE9BQU8sRUFFTCxJQUFJLEVBQ0osT0FBTyxHQUdSLE1BQU0sWUFBWSxDQUFDO0FBQ3BCLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUN4QixPQUFPLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFFakQsT0FBTyxFQUNMLHdCQUF3QixFQUN4QixnQkFBZ0IsRUFDaEIscUJBQXFCLEVBQ3JCLG9CQUFvQixFQUNwQixXQUFXLEdBQ1osTUFBTSxnQkFBZ0IsQ0FBQztBQTBHeEIsTUFBTSxLQUFLLEdBQW1CLEtBQUssQ0FBQyxVQUFVLENBQzVDLENBQ0UsRUFDRSxLQUFLLEVBQ0wsU0FBUyxHQUFHLEVBQUUsRUFDZCxRQUFRLEdBQUcsS0FBSyxFQUNoQixJQUFJLEdBQUcsSUFBSSxFQUNYLE9BQU8sR0FBRyxPQUFPLEVBQ2pCLEVBQUUsRUFDRixHQUFHLEVBQ0gsVUFBVSxHQUFHLFNBQVMsRUFDdEIsUUFBUSxHQUFHLEtBQUssRUFDaEIsV0FBVyxFQUNYLFFBQVEsR0FBRyxLQUFLLEVBQ2hCLFVBQVUsR0FBRyxFQUFFLEVBQ2YsS0FBSyxFQUNMLFlBQVksR0FBRyxFQUFFLEVBQ2pCLFFBQVEsRUFDUixPQUFPLEVBQ1AsTUFBTSxFQUNOLElBQUksR0FBRyxLQUFLLEVBQ1osR0FBRyxLQUFLLEVBQ00sRUFDaEIsR0FBdUIsRUFDdkIsRUFBRTtJQUNGLE1BQU0sQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLEdBQUcsUUFBUSxDQUFTLFlBQVksQ0FBQyxDQUFDO0lBQ2pFLE1BQU0sQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLEdBQUcsUUFBUSxDQUFVLEtBQUssQ0FB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